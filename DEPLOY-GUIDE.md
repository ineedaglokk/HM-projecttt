# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Netlify

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Netlify
–í –ø–∞–Ω–µ–ª–∏ Netlify (Site settings ‚Üí Environment variables) –¥–æ–±–∞–≤—å—Ç–µ:

```bash
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞_telegram
WEBAPP_URL=https://–≤–∞—à-—Å–∞–π—Ç.netlify.app
WEBHOOK_URL=https://–≤–∞—à-—Å–∞–π—Ç.netlify.app/.netlify/functions/bot
NODE_ENV=production
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ git:

```bash
git add .
git commit -m "–ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é"
git push origin main
```

## üîß –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Netlify**
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏** (–¥–æ–ª–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å—Å—è –∏–∑ netlify.toml):
   - Build command: `npm run build && cd bot && npm run build`
   - Publish directory: `dist`
   - Functions directory: `netlify/functions`

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π**

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Webhook

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook:

```bash
cd bot
npm run setup-webhook
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
```bash
curl -X POST "https://api.telegram.org/bot{YOUR_BOT_TOKEN}/setWebhook" \
-d "url=https://–≤–∞—à-—Å–∞–π—Ç.netlify.app/.netlify/functions/bot"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –±–æ—Ç–∞:**
   ```
   https://–≤–∞—à-—Å–∞–π—Ç.netlify.app/.netlify/functions/bot/health
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   https://–≤–∞—à-—Å–∞–π—Ç.netlify.app
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram**

## ‚ùå –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "require is not defined"
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `require.main`

### "MaxListenersExceededWarning" 
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–æ –¥–ª—è Netlify Functions

### Build –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω—ã

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í–∫–ª—é—á–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç XSS –∏ CSRF
- –ù–∞—Å—Ç—Ä–æ–µ–Ω Content Security Policy
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–æ

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ:
- –õ–æ–≥–∏ Netlify Functions
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞
- –û—à–∏–±–∫–∏ –≤ Telegram Bot API 