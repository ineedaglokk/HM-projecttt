# Функция выбора ресторана для отзыва

## Проблема
Ранее при нажатии кнопки "Оставить отзыв" на главной странице отзыв автоматически привязывался к первому ресторану в списке города. Это было неудобно в городах с несколькими ресторанами.

## Решение
Реализована интеллектуальная система выбора ресторана:

### Логика работы
1. **Город с 1 рестораном** → сразу переход к форме отзыва
2. **Город с несколькими ресторанами** → сначала страница выбора ресторана

### Реализованные компоненты

#### 1. Страница выбора ресторана (`SelectRestaurantForReview.tsx`)
- Красивый список всех ресторанов в выбранном городе
- Hover-эффекты и анимации
- Информативный интерфейс с адресами
- Автоматическое сохранение выбора в localStorage

#### 2. Обновленная логика на главной странице
```typescript
// Если в городе несколько ресторанов - идем на выбор ресторана
if (selectedCity.restaurants.length > 1) {
  navigate("/select-restaurant-review");
} else {
  // Если ресторан один - сразу на отзыв
  localStorage.setItem('selectedRestaurantForReview', selectedCity.restaurants[0].id);
  navigate("/review");
}
```

#### 3. Обновленная страница отзывов
- Использует выбранный ресторан из localStorage
- Показывает название и адрес ресторана в заголовке
- Автоматическая очистка выбора после отправки

#### 4. Интеграция со страницей ресторанов
- Кнопка "В приложении" сохраняет ID конкретного ресторана
- Прямой переход к отзыву без дополнительного выбора

### Маршруты
- `/select-restaurant-review` - страница выбора ресторана
- `/review` - форма отзыва (работает с выбранным рестораном)

### Примеры городов для тестирования

**Города с несколькими ресторанами:**
- Нижний Новгород (3 ресторана)
- Санкт-Петербург (4 ресторана) 
- Казань (2 ресторана)
- Самара (2 ресторана)

**Города с одним рестораном:**
- Кемерово
- Томск
- Смоленск
- Калуга
- и др.

### Техническая реализация

**Хранение выбора:**
```javascript
localStorage.setItem('selectedRestaurantForReview', restaurantId);
```

**Получение выбранного ресторана:**
```javascript
const selectedRestaurantId = localStorage.getItem('selectedRestaurantForReview');
const restaurant = selectedRestaurantId 
  ? selectedCity.restaurants.find(r => r.id === selectedRestaurantId) || selectedCity.restaurants[0]
  : selectedCity.restaurants[0];
```

**Очистка после использования:**
```javascript
localStorage.removeItem('selectedRestaurantForReview');
```

## Пользовательский опыт

### Сценарий 1: Город с одним рестораном
1. Пользователь нажимает "Оставить отзыв"
2. Сразу попадает на форму отзыва
3. Никаких дополнительных действий не требуется

### Сценарий 2: Город с несколькими ресторанами
1. Пользователь нажимает "Оставить отзыв"
2. Попадает на страницу выбора ресторана
3. Видит список всех ресторанов с адресами
4. Выбирает нужный ресторан
5. Попадает на форму отзыва для выбранного ресторана

### Сценарий 3: Отзыв со страницы ресторанов
1. Пользователь на странице конкретного ресторана
2. Нажимает "В приложении"
3. Сразу попадает на форму отзыва для этого ресторана

## Преимущества
- ✅ Точное указание ресторана для отзыва
- ✅ Интуитивно понятный интерфейс
- ✅ Оптимизация UX для разных сценариев
- ✅ Красивый дизайн в стиле приложения
- ✅ Автоматическая очистка данных

## Дальнейшие улучшения
- Добавить изображения ресторанов на страницу выбора
- Показать рейтинг и количество отзывов для каждого ресторана
- Добавить поиск по ресторанам в больших городах 